<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Registro API</title>
</head>

<body>
    <h1>Registrar Usuario</h1>
    <form id="formulario">
        <input type="text" name="nombre" placeholder="Nombre" required />
        <button type="submit">Enviar</button>
    </form>

    <h2>Usuarios Registrados</h2>
    <ul id="lista-usuarios"></ul>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            async function cargarUsuarios() {
                const res = await fetch('http://localhost:3000/');
                const data = await res.json();
                const lista = document.getElementById('lista-usuarios');
                lista.innerHTML = '';
                data.forEach(u => {
                    const li = document.createElement('li');
                    li.textContent = u.nombre;
                    lista.appendChild(li);
                });
            }

            document.getElementById('formulario').addEventListener('submit', async e => {
                e.preventDefault();
                const form = new FormData(e.target);
                await fetch('http://localhost:3000/', {
                    method: 'POST',
                    body: new URLSearchParams(form)
                });
                e.target.reset();
                cargarUsuarios();
            });

            cargarUsuarios();
        })
    </script>
</body>

</html>